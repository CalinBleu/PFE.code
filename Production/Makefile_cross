# Makefile production cross-compilation

# Compilateur croisé à utiliser (à adapter)
RASPBERRY_GCC = /<path>/<to>/<tools>/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64/bin/arm-linux-gnueabihf-gcc

# Compilateur.S
CC = $(RASPBERRY_GCC)
LD = $(RASPBERRY_GCC)
CCFLAGS += -Wall -Wextra -Wno-unused-variable -Wno-unused-parameter -std=c99 -D_POSIX_C_SOURCE=199309L
CCFLAGS += --sysroot=/<path>/<to>/<rootfs>
LDFLAGS += -lsqlite3 -lm -lrt -lgpiod --sysroot=/<path>/<to>/<rootfs>

SRCS = starter.c brain.c archivist.c guard.c manager.c sha256.c doorman.c
OUT = Visiolock.out

all: $(OUT)

$(OUT): $(SRCS)
	$(CC) -o $@ $^ $(CFLAGS) $(LDFLAGS)

clean:
	rm -f $(OUT)

